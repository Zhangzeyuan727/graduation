{"remainingRequest":"/Users/zzy/Desktop/zzy/node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!/Users/zzy/Desktop/zzy/src/views/books/books.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/zzy/Desktop/zzy/src/views/books/books.vue","mtime":1544408380000},{"path":"/Users/zzy/Desktop/zzy/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/Users/zzy/Desktop/zzy/node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zzy/Desktop/zzy/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zzy/Desktop/zzy/node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/zzy/Desktop/zzy/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zzy/Desktop/zzy/node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#books {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 52px;\n  overflow: hidden;\n  .header {\n    text-align: center;\n    line-height: 48px;\n    width: 100%;\n    height: 48px;\n    background-color: #bbd2c2;\n    color: white;\n  }\n  .content {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 48px;\n    bottom: 0px;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    background-color: #f1f1f1;\n    .book {\n      width: 100%;\n      height: 120px;\n      background-color: white;\n      border-top: 1px solid #eee;\n      border-bottom: 1px solid #eee;\n      margin: 10px 0;\n      display: flex;\n      justify-content: flex-end;\n      img {\n        width: 80px;\n        height: 100px;\n        margin: 10px;\n      }\n      .bookInfo {\n        width: calc(100% - 100px);\n        display: flex;\n        flex-direction: column;\n        margin-right: 10px;\n        margin-top: 10px;\n        p:first-child {\n          font-size: 14px;\n          font-weight: bold;\n          color: #333;\n        }\n        p:nth-child(2) {\n          font-size: 12px;\n          color: #666;\n          margin-bottom: 2px;\n        }\n        p:last-child {\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 3;\n          overflow: hidden;\n          font-size: 12px;\n          color: #999;\n        }\n      }\n    }\n    .book:first-child {\n      margin-top: 16px;\n    }\n  }\n  .loading-box {\n    width: 100%;\n    height: 30px;;\n    display: flex;\n    justify-content: center;\n    position: fixed;\n    bottom: 40px;\n  }\n}\n",{"version":3,"sources":["books.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"books.vue","sourceRoot":"src/views/books","sourcesContent":["<template>\n  <div id=\"books\">\n    <div class=\"header\">\n      书城\n    </div>\n    <div\n      v-infinite-scroll=\"loadMore\"\n      infinite-scroll-disabled=\"loading\"\n      :infinite-scroll-immediate-check=\"true\"\n      infinite-scroll-distance=\"10\"\n      class=\"content\"\n    >\n      <div\n        class=\"book\"\n        v-for=\"item in bookList\"\n        v-bind:key=\"item.id\"\n        @click=\"goDetail(item.id)\"\n      >\n        <img src=\"../.././assets/bookImg/book-1.jpg\" />\n        <div class=\"bookInfo\">\n          <p>{{item.name}}</p>\n          <p>{{item.author.name}}</p>\n          <p>{{item.description}}</p>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"loading-box\"\n      v-if=\"isLoading\"\n    >\n      <mt-spinner\n        type=\"triple-bounce\"\n        :size=\"20\"\n      ></mt-spinner>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      message: \"\",\n      bookList: [],\n      pageInfo: {\n        page: 1,\n        size: 10,\n        //总条数\n        total: 0,\n        //分页数\n        totalPage: 1\n      },\n      isLoading: false\n    };\n  },\n  created() {\n    this.loadData();\n  },\n  methods: {\n    goDetail(id) {\n      localStorage.setItem('bookDetailId',id);\n      this.$router.push({ path: \"/bookDetail\"});\n    },\n    loadData() {\n      // this.$Indicator.open('加载中...');\n      this.$http\n        .queryBook(\n          `limit=${this.pageInfo.size}&page=${\n            this.pageInfo.page\n          }&pagination=false`\n        )\n        .then(res => {\n          if (res.data.statusCode === 1) {\n            this.pageInfo.total = 30;\n            this.pageInfo.totalPage = Math.ceil(\n              this.pageInfo.total / this.pageInfo.size\n            );\n            // console.log(res.data);\n            this.bookList.push(...res.data.results);\n            this.isLoading = false;\n            // console.log(this.bookList);\n          } else {\n      \n          }\n        })\n        .catch(err => {\n          console.log(err);\n        });\n        // this.$Indicator.close();\n    },\n    loadMore() {\n      this.pageInfo.page++;\n      this.loading = true;\n      this.isLoading = true;\n      if (this.pageInfo.page > this.pageInfo.totalPage) {\n        this.isLoading = false;\n        this.noMore = true;\n        return;\n      }\n      setTimeout(() => {\n        this.loadData();\n      }, 1500);\n    }\n  }\n};\n</script>\n\n\n<style lang=\"scss\">\n#books {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 52px;\n  overflow: hidden;\n  .header {\n    text-align: center;\n    line-height: 48px;\n    width: 100%;\n    height: 48px;\n    background-color: #bbd2c2;\n    color: white;\n  }\n  .content {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 48px;\n    bottom: 0px;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    background-color: #f1f1f1;\n    .book {\n      width: 100%;\n      height: 120px;\n      background-color: white;\n      border-top: 1px solid #eee;\n      border-bottom: 1px solid #eee;\n      margin: 10px 0;\n      display: flex;\n      justify-content: flex-end;\n      img {\n        width: 80px;\n        height: 100px;\n        margin: 10px;\n      }\n      .bookInfo {\n        width: calc(100% - 100px);\n        display: flex;\n        flex-direction: column;\n        margin-right: 10px;\n        margin-top: 10px;\n        p:first-child {\n          font-size: 14px;\n          font-weight: bold;\n          color: #333;\n        }\n        p:nth-child(2) {\n          font-size: 12px;\n          color: #666;\n          margin-bottom: 2px;\n        }\n        p:last-child {\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 3;\n          overflow: hidden;\n          font-size: 12px;\n          color: #999;\n        }\n      }\n    }\n    .book:first-child {\n      margin-top: 16px;\n    }\n  }\n  .loading-box {\n    width: 100%;\n    height: 30px;;\n    display: flex;\n    justify-content: center;\n    position: fixed;\n    bottom: 40px;\n  }\n}\n</style>"]}]}